<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>JonyBird</title>
  <link rel="stylesheet" href="js-dos.css">
  <style>
    body { margin: 0; background: black; }
    #dosbox { width: 100vw; height: 100vh; }
  </style>
</head>
<body>
  <div id="dosbox"></div>
  <script src="js-dos.js"></script>
  <script>
    // 1. טוען אוטומטית את הקובץ BIRD.jsdos
    const runner = Dos(document.getElementById("dosbox"), {
      url: "https://jonybonyy.github.io/JonyBird-web/BIRD.jsdos",
      wdosboxUrl: "wdosbox.js"
    });

    // 2. מאזין לאירוע לחיצה (Play). ברגע שנלחץ — מריץ את dosbox.conf
    document.getElementById("dosbox").addEventListener("click", async () => {
      if (runner && typeof runner.ready === "function") {
        runner.ready(async (fs, main) => {
          await fs.createFile("dosbox.conf", `
[cpu]
cycles=15000

[autoexec]
mount c .
c:
cd game
flappyy.exe
          `);
          main(["-conf", "dosbox.conf"]);
        });
      }
    });
  </script>
</body>
</html>
